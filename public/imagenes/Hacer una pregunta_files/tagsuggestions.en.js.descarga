StackExchange.tagSuggestions=function(){function e(){o=$(".js-tag-suggestions"),a=$("#tagnames"),a.change(function(){i()}),s=StackExchange.helpers.DelayedReaction(r,1e4,{"sliding":!0}),$("#post-form").submit(function(){$(this).find("input[name='tag-suggestions']").remove().end().append(t())}),$("#wmd-input").on("keydown",function(){s.trigger()}).on("blur",function(){StackExchange.cardiologist.ensureDraftSaved(function(e){e&&e.suggestedTags&&n(e.suggestedTags),r(),s.cancel()},!0)})}function t(){var e="";for(var t in l)l.hasOwnProperty(t)&&/^t_/.test(t)&&(e+=t.replace(/^t_/," "));return $("<input type='hidden' name='tag-suggestions' />").val(e.substring(1))}function n(e){c=e}function r(){i(c)}function i(e){if(o){if(e=e||u,u=e,!e.length)return o.empty(),void 0;o.html("<span>suggested tags:</span>");for(var t=function(e){return new RegExp("(?:^|\\s)"+e.replace(/[.+]/g,"\\$&")+"(?:$|\\s)","i").test(a.val())},n=0;n<e.length;n++){var r=e[n];l["t_"+r]=1;var i=!t(r),s=window.tagRenderer(r,null,i?"a":"span");i&&s.click(function(e){if(!e.ctrlKey&&1==e.which){e.preventDefault();var n=$(this).text(),r=this;if(setTimeout(function(){$(r).replaceWith(window.tagRenderer(n,null,"span"))},0),t(n))return a.focus(),void 0;$("#tag-menu").parent().remove(),a[0].func_add(n)}}),o.append(s)}}}var o,a,s,c=[],l={},u=[];return{"init":e,"suggest":n}}();